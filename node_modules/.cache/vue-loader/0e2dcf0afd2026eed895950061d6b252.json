{"remainingRequest":"/home/soojy/Documents/projects/vuetify-surpk/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/soojy/Documents/projects/vuetify-surpk/src/components/ModalSend.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/soojy/Documents/projects/vuetify-surpk/src/components/ModalSend.vue","mtime":1619721451252},{"path":"/home/soojy/Documents/projects/vuetify-surpk/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/soojy/Documents/projects/vuetify-surpk/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/soojy/Documents/projects/vuetify-surpk/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/soojy/Documents/projects/vuetify-surpk/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/soojy/Documents/projects/vuetify-surpk/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJdGVtTGlzdCBmcm9tICIuL0l0ZW1MaXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHAiLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7CiAgICBzb3VyY2U6IFN0cmluZywKICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBmaXJzdG5hbWU6ICIiLAogICAgbGFzdG5hbWU6ICIiLAogICAgY2FiOiAiIiwKICAgIHByb2JsZW06ICIiLAogICAgc3A6ICIiLAoKICAgIGRyYXdlcjogdHJ1ZSwKICAgIGRpYWxvZzogZmFsc2UsCiAgICBpdGVtczogWyLQodCfLTEiLCAi0KHQny0yIiwgItCh0J8tMyIsICLQodCfLTQiLCAi0KHQny01Il0sCiAgICBuYW1lUnVsZXM6IFsodikgPT4gISF2IHx8ICLQmNC80Y8g0L7QsdGP0LfQsNGC0LXQu9GM0L3QviJdLAogICAgbGFzdE5hbWVSdWxlczogWyh2KSA9PiAhIXYgfHwgItCk0LDQvNC40LvQuNGPINC+0LHRj9C30LDRgtC10LvRjNC90LAiXSwKICB9KSwKICBtZXRob2RzOiB7CiAgICBhc3luYyB2YWxpZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdGhpcy5kaWFsb2cgPSAhdGhpcy5kaWFsb2c7CgogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgY2FiOiB0aGlzLmNhYiwKICAgICAgICAgIHByb2JsZW06IHRoaXMucHJvYmxlbSwKICAgICAgICAgIHNwOiB0aGlzLnNwLAogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgbGV0IGlkID0gYXdhaXQgZmV0Y2goImh0dHA6Ly9hcGktc3VycGsuaGVyb2t1YXBwLmNvbS9yZXF1ZXN0cy8iLCB7CiAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YVsnaW5zZXJ0SWQnXSkKICAgICAgICAgICAgY29uc3QgaWQgPSBkYXRhWyJpbnNlcnRJZCJdOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpZCkKICAgICAgICAgICAgcmV0dXJuIGlkOwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKChpZCkgPT4gewogICAgICAgICAgICByZXR1cm4gaWQ7CiAgICAgICAgICB9KTsKICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKTsKICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICAgICAgY29uc29sZS5sb2coSXRlbUxpc3QpOwoKICAgICAgICBjb25zdCBuZXdUb2RvID0gewogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgd29ya2VyOiB0aGlzLndvcmtlciwKICAgICAgICAgIGNhYjogdGhpcy5jYWIsCiAgICAgICAgICBwcm9ibGVtOiB0aGlzLnByb2JsZW0sCiAgICAgICAgICBzdGF0dXM6ICIxIiwKICAgICAgICAgIGRhdGU6IERhdGUubm93KCksCiAgICAgICAgICBzcDogdGhpcy5zcCwKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgICBJdGVtTGlzdC5tZXRob2RzLmFkZFRvZG8obmV3VG9kbyk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ModalSend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalSend.vue","sourceRoot":"src/components","sourcesContent":["<template v-slot:extension>\n  <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-btn\n        fixed\n        dark\n        fab\n        bottom\n        right\n        color=\"#ff6600\"\n        v-on=\"on\"\n        v-bind=\"attrs\"\n        @click=\"dialog = !dialog\"\n        style=\"bottom: 50px !important; box-shadow: none !important\"\n      >\n        <v-icon>mdi-plus</v-icon>\n      </v-btn>\n    </template>\n    <v-card>\n      <v-form ref=\"form\" lazy-validation>\n        <v-card-title>\n          <span class=\"headline\">Создание заявки</span>\n        </v-card-title>\n        <v-card-text>\n          <v-container>\n            <v-row>\n              <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                <v-text-field\n                  v-model=\"firstname\"\n                  label=\"Имя*\"\n                  :rules=\"nameRules\"\n                  required\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                <v-text-field\n                  v-model=\"lastname\"\n                  :rules=\"lastNameRules\"\n                  label=\"Фамилия*\"\n                  hint=\"\"\n                  required\n                ></v-text-field>\n              </v-col>\n              <!--                      <v-col cols=\"12\" sm=\"6\" md=\"4\">-->\n              <!--                        <v-text-field-->\n              <!--                          label=\"Legal last name*\"-->\n              <!--                          hint=\"example of persistent helper text\"-->\n              <!--                          persistent-hint-->\n              <!--                          required-->\n              <!--                        ></v-text-field>-->\n              <!--                      </v-col>-->\n              <v-col cols=\"12\"> </v-col>\n              <v-col cols=\"12\">\n                <!--                        <v-text-field label=\"Password*\" type=\"password\" required></v-text-field>-->\n                <v-textarea\n                  label=\"Проблема\"\n                  :rules=\"[(v) => !!v || 'Поле обязательно']\"\n                  v-model=\"problem\"\n                  counter\n                ></v-textarea>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-select\n                  :items=\"['СП-1', 'СП-2', 'СП-3', 'СП-4', 'СП-5']\"\n                  label=\"СП\"\n                  v-model=\"sp\"\n                  :rules=\"[(v) => !!v || 'Поле обязательно']\"\n                  required\n                ></v-select>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"cab\"\n                  label=\"Кабинет*\"\n                  :rules=\"nameRules\"\n                  required\n                ></v-text-field>\n              </v-col>\n            </v-row>\n          </v-container>\n          <small>*Обязательные поля</small>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"dialog = false\"\n            >Закрыть</v-btn\n          >\n          <v-btn color=\"blue darken-1\" text @click=\"validate\">Отправить</v-btn>\n        </v-card-actions>\n      </v-form>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport ItemList from \"./ItemList\";\nexport default {\n  name: \"App\",\n  components: {},\n  props: {\n    source: String,\n  },\n  data: () => ({\n    firstname: \"\",\n    lastname: \"\",\n    cab: \"\",\n    problem: \"\",\n    sp: \"\",\n\n    drawer: true,\n    dialog: false,\n    items: [\"СП-1\", \"СП-2\", \"СП-3\", \"СП-4\", \"СП-5\"],\n    nameRules: [(v) => !!v || \"Имя обязательно\"],\n    lastNameRules: [(v) => !!v || \"Фамилия обязательна\"],\n  }),\n  methods: {\n    async validate() {\n      if (this.$refs.form.validate()) {\n        this.dialog = !this.dialog;\n\n        let data = {\n          cab: this.cab,\n          problem: this.problem,\n          sp: this.sp,\n        };\n        console.log(data);\n        let id = await fetch(\"http://api-surpk.herokuapp.com/requests/\", {\n          method: \"POST\",\n          body: JSON.stringify(data),\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        })\n          .then(function (res) {\n            console.log(data);\n            return res.json();\n          })\n          .then(function (data) {\n            // console.log(data['insertId'])\n            const id = data[\"insertId\"];\n            // console.log(id)\n            return id;\n          })\n          .then((id) => {\n            return id;\n          });\n        this.$refs.form.reset();\n        this.$refs.form.resetValidation();\n        console.log(ItemList);\n\n        const newTodo = {\n          id: id,\n          worker: this.worker,\n          cab: this.cab,\n          problem: this.problem,\n          status: \"1\",\n          date: Date.now(),\n          sp: this.sp,\n        };\n        console.log(id);\n        ItemList.methods.addTodo(newTodo);\n      }\n    },\n  },\n};\n</script>\n"]}]}